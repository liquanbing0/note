2021.12.16-张忆伟-双300满分战报
1、模拟题和真实考场的解法是相同的，但是没有哪一家机构是和考试环境的题目内容是一模一样的，包含里面的用户名啊，密码，IP地址，计划任务的时间等这些。那么做实验的时候要注意那些地方你是能变动的，或者有没有更好的解法。再说在工作里面，遇到的情况也是多种多样的，不是一成不变的，学的是原理，不要题目换一个说法你就不会做。
2、不要放弃任何一题，不要想着够210分就算，如果你的水平只有240分，考试的时候有哪一题你一下不小心犯错误，最后可能就不够210分。
3、要学会检查，而且最好是能看到表项那种。举个例子，cron那一题计划任务，一般大家都通过crontab -l -u检查那个计划任务有没有存在，但是换一个思路，因为这个任务最终目的要用logger命令生成日志，所以我们是不是能直接查看/var/log/messages所产生日志的内容，就可以判断我们是否正确，回归到平时的工作也是一个道理。
4、有一些复杂的关键字尽量用man结合grep来查，譬如selinux那个题我就是通过semanage port | grep http，最后把端口81改为82即可，我也没记住后面-a啊-t啊这些东东，估计考完过几个月后肯定更记不得。还有vdo卷那个什么vdoLogicalSize（还要注意大小写，我的天，真不明白那个开发这个工具的外国人思维），是man出来后复制粘贴的，而不是靠猜的。回归到工作也是一个道理，就算是杨哥，我也不相信他能记住命令的所有参数。
5、做完以后检查一遍，注意一些名字的名称也不要错。譬如考场那个autofs的题用户名是remoteuser11，注意不是练习里的remoteuser1，如果是粗心的同学看了一眼就理所当然那样敲，最后这个题就是做不出现象，这种是属于好冤的。像我这种能复制粘贴（其实平时练习时候这些名称我也懒得打）就复制粘贴。另外要熟悉vim的v和ctrl+v这两个视图模式的各种快捷键，playbook很多地方只需要做一次，然后复制粘贴改个别参数即可。
6、考试环境缺省是没有装tree命令的，但是能用通过考场yum源来安装。检查目录结构这个命令是最佳的，譬如ansible创建apache角色那一题通过tree能更清晰表示。
7、如果你对一些ansible模块关键字不熟的话，提议多用ansible-doc查看，注意不要“靠猜“！譬如ansible-doc firewalld能查看防火墙。学的是原理，不是记住所谓的关键字。
8、备考最快的方法是看最新版的解法+《考试题目变化》+考试注意事项+战报。我是比较慢的那种，原因是我把千锋所有的rhce资料看过一遍。
9、随机题（附加题）也是从题库里面抽。
===============================================================================================================
rhcsa（考试注意事项）
1、考试开始前，考官会在你身边提示你填写个人信息。
2、考试开始后，像平时练习那样开始做题，但是有一点不同，机器背景和题目要求是通过超链接的形式要点进去，而不是题库那样，全部展开的。
===============================================================================================================
一、第一题配置网络：
1、DNS在考试题目里面是指名称服务器，等于平时模拟试题的DNS，只是换了一个叫法。其他按照题库解法。
2、尽量多用tab补全，原因是nmcli con show只有一个网卡配置，当你敲到Wi(red connection)前两个字母时候，就可以直接补全，不需敲完整个名称。
3、设置完网卡后通过ssh进去设置主机名，ssh的好处是能复制粘贴，那一串主机名如果要慢慢敲是很痛苦的。
===============================================================================================================
二、配置yum源
1、前期练习依赖yum-config-manager来配置repo，但是后期又回归用文本手写的方式，原因只有手写能把两个yum源写在同一个repo。注意gpgcheck要关闭。
===============================================================================================================
三、配置Selinux
1、/var/www/html/的路径下有三个文件file1，file2，file3，其中file1没有httpd_sys_content_t，用chron -t httpd_sys_content_t file1加上，其他按照题库解法
2、一定要放行82端口后，systemctl enable --now httpd才能成功
3、用浏览器验证要关闭防火墙，就算selinux已经放开
===============================================================================================================
四、用户及组管理
1、这里的密码和平时模拟题不同，根据实际题目的名称创建
2、验证是ssh到对应用户
===============================================================================================================
五、计划任务
1、这个题为固定时间14点23分，而不是每两分钟
===============================================================================================================
六、目录权限设置
1、目录的名字不是题库那个，换了个名字
===============================================================================================================
七、autofs自动挂载
1、挂载的目录不是题库，根据实际题目的名称创建
2、验证是su过去对应的用户，随便创建一个文件，证明你有读写权限。
===============================================================================================================
八、配置文件权限
1、和题库相同
===============================================================================================================
九、时间客户端NTP
1、和题库相同，凡是遇到和服务有关的题目，最后记得都要enable --now一下，避免遇到坑，重启后不能启动起来
===============================================================================================================
十、创建用户
1、用户名、UID和密码都不同，根据实际题目的名称创建
===============================================================================================================
十一、查找文件
1、和题库相同，查找对应用户名的文件名也相同
===============================================================================================================
十二、查找文件中的内容
1、查找的内容不同，根据实际题目的名称创建
===============================================================================================================
十三、文件归档
1、我当时抽到的是gzip，也就是tar czvf，压缩的目录和文件名称不同，根据实际题目的名称创建
===============================================================================================================
十四、容器
1、这个题不止是/var/log/journal这个目录要创建，还要创建william（考试不是wallah）目录下的container_logfile目录。
2、注意复制后的文件保持属组和属主一致，所创建/var/log/journal的属组也是一个道理（这个是systemd-journal属组），于都要用到chown的-R参数，把container_logfile设置属主和属组为william。
3、这一题另外要执行一条命令，生成logserver容器中的日志。
4、验证的时候是先重启机器（做完node2后），后登录到william这个用户里，用podman exec cat一下日志文件，看container_logfile目录下的日志是否有生成对应的内容，和题库解法几乎是一致的。
===============================================================================================================
十五、umask
我这里遇到的新题是umask，这个根据题目所需的权限，用最大权限相减，就是umask的值。
譬如我遇到的是tommie用户创建文件的权限缺省为-r--r--r--，目录权限为dr-xr-xr-x。
由于文件权限最大为666，而题目要求为444，于是相减后为222，注意前面还要补一个0，原因是没有UGS占位，而目录777减去222后也是得到555，和r-xr-xr-x相同，说明掩码就是222。
最后需要写到/home/tommie目录下的.bashrc文件里，或者.bash_profile，最后source更新一下，su - tommie，用umask检查一下是不是0222。

一、重置root密码
1、在控制台里面上面有一个功能，发送"ctrl+alt+del"按钮来重启。不要用kvm里面的重启功能，再打开console。原因是机器有可能已过启动引导界面，也就是说你会有可能跟不上按e进入救援模式。
2、重置密码需要重启的时间比较久，不要以为是卡死。
===============================================================================================================
二、配置yum源
1、直接用scp root@node1即可，之后就安装vdo，反正后面也要装，顺便能验证这一题。
===============================================================================================================
三、调整逻辑卷
1、和模拟题一样。调整的大小都相同。
===============================================================================================================
四、添加交换分区(SWAP虚拟内存) 
1、和模拟题一样。设置的大小都相同。注意必须用vdb分一块出来。
===============================================================================================================
五、创建逻辑卷
1、必须在vdb上进行分区，vdc只能用在vdo那一题。
2、卷组和逻辑卷的名称不同，而且大小不同，所挂载的目录名称也不同，根据实际题目创建。
3、注意分区的格式。
===============================================================================================================
六、创建VDO卷
1、用vdc这个硬盘，和模拟题一样的，连名称和大小都相同。关键字不记得的话要man一下。
===============================================================================================================
七、系统优化设置
1、和模拟题一样。
===============================================================================================================
rhce（考试注意事项）
一、安装及配置 ansible
1、IP地址不同，但是资产清单用的是域名，不用理会NODE1-NODE5的IP地址。host_key那个要设置要关闭。
2、验证的时候最好就用setup模块，ansible all -m setup把所有环境变量导出来，方便做后面的题时查找（硬件报告，创建LVM卷等都会用到）。
===============================================================================================================
二、创建并运行 ansible ad-hoc 命令
1、和模拟题一样。
===============================================================================================================
三、安装软件包
1、和模拟题一样。
===============================================================================================================
四、使用 RHEL system role
1、注意requirement文件要在roles目录里。我以前练习的时候有时候没注意就放在ansible目录下，不是ansible/roles，直接判你没有分。
2、这里要用vim的v模式复制粘贴README.md里的模板，就不用慢慢敲。
===============================================================================================================
五、使用 Ansible Galaxy 安装 roles
1、和模拟题一样。用tree命令检查roles目录。
===============================================================================================================
六、创建并使用 role
1、和模拟题一样，最好不要用循环那个方法，千锋的判分脚本不智能会判你没有分，考场的判分方法我们不知道，养成习惯还是一个一个写。
2、需要新建一个newrole.yml（真实考题的名称）在webservers组上测试这个角色，具体题库里面就有解法（题库里的名称为apache.yml）。
===============================================================================================================
七、使用来自 Ansible Galaxy 的 roles
1、一定要先安装phpinfo角色再装balancer角色。
===============================================================================================================
八、创建并使用逻辑卷
1、和模拟题一样。验证用ansible all -a 'lvs'  ansible all -a 'vgs'  ansible all -a 'pvs'
===============================================================================================================
九、生成一个 hosts 文件
1、和模拟题一样。验证用ansible all -a 'cat /etc/myhost'
===============================================================================================================
十、修改文件内容
1、和模拟题一样。三个copy模块只需要写好一个，复制粘贴另外两个，改参数即可。验证用ansible all -a 'cat /etc/issue'
===============================================================================================================
十一、创建一个 WEB 内容目录
1、和模拟题一样。可以用上之前的apache角色，这样就可以少写一些内容，当然也可以不用。
===============================================================================================================
十三、创建一个包含密码的 vault 文件
1、这里有个技巧，locker.yml加密之后，ansible.cfg里的加密文件路径先不要修改，把15题做完后再修改，不然15题无法更换密码。
===============================================================================================================
十四、创建用户账户
1、和模拟题一样。注意加上vars_files调用其他yml文件变量，而且ansible.cfg的加密文件的路径要指定为secret.txt，不然会判你没有分。
2、我没遇到要加到期时间或者UID的。检查就是ansible all -a 'cat /etc/passwd'或者直接ssh那一台机器对应的用户。
===============================================================================================================
十五、 更新 Ansible 库的密钥
1、这里用ansible-vault rekey方法是最快的，而且最后一定要保证ansible的解密缺省路径是第13题的secret.txt的密匙，而不是这一题的密匙，原因考场判分是按照那个。
2、验证用ansible-vault edit查看一下那个下载回来yml文件，最后是否为解密后的明文内容。
===============================================================================================================
十六、 nantasha计划作业
1、这个是新题。每两分钟输出一次内容，验证是看/var/log/messages所产生日志的内容，natasha这个账号也已经存在。
2、当然为了保险，最好还是加上user模块。state设置为present。
#Redhat 